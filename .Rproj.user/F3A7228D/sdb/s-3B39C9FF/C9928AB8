{
    "collab_server" : "",
    "contents" : "---\ntitle: \"外國人來台灣數量及目的分析\"\noutput: github_document\n---\n\n## 分析議題背景\n組員姓名 B0344126鄭筠臻、B0344129葉亞萱 \n在地球村的時代，每年哪一國人最常來台灣呢，來台灣又有哪些目的呢\n\n## 分析動機\n台灣是觀光勝地，想了解那些世界各國來台灣，找出前三名，找出與台灣密切往來的國家，並了解其目的，分析目的主要原因為何?例如：業務、觀光、探親、會議、求學、展覽、醫療……等等。想透過大數據R語言解釋出台灣在世界各國的重要性。\n\n## 使用資料\nhttp://admin.taiwan.net.tw/statistics/year.aspx?no=134\n\n載入使用資料們\n```{r}\nlibrary(readr)\ncountry<- read_csv(\"C:/Users/X550LD/Desktop/visitor arrivals (2003-2016).csv\")\nView(country)\ncountry$X1<-\n  iconv(country$X1,\n        from=\"big5\", to = \"UTF-8\")\n\nlibrary(readr)\npurpose_2016 <- read_csv(\"C:/Users/X550LD/Desktop/visitor arrivals by purpose(2016) .csv\")\nView(purpose_2016)\n\npurpose_2016$Residence<-\n  iconv(purpose_2016$Residence,\n        from=\"big5\", to = \"UTF-8\")\n\n```\n\n## 資料處理與清洗\n先取出105年前10名的人數資料，再把兩個表合起來，然後再把資料轉成數值，再算出比例，就可以知道前三名的國家來台灣大多是為了旅遊，洽公或是其他原因\n\n處理資料\n```{r}\nlibrary(readr)\ncountrycode <- read_csv(\"C:/Users/X550LD/Desktop/Code.csv\")\nView(countrycode)\ncountrycode$Residence<-\n  iconv(countrycode$Residence,\n        from=\"big5\", to = \"UTF-8\")\n\nlibrary(dplyr)\npurpose_2016_code<-inner_join(purpose_2016,countrycode, by = \"Residence\")\nlibrary(treemap)\ndata(purpose_2016_code)\ntreemap(purpose_2016_code,\n       index=c(\"code\"), \n       vSize=\"Total\", \n       vColor=\"Total\", \n       type=\"value\")\n\n```\n\n```{r}\ncountry10<-head(country[order(country$X_2016,decreasing = T),],10)\ncountry10<-subset(country10,select = c(X1,X_2016))\nlibrary(dplyr)\ntop10<-inner_join(country10,purpose_2016_code,c(\"X1\"=\"Residence\"))\n\nlibrary(knitr)\nknitr::kable(\n  top10[1:10,])\n\ntop10$Total<-as.double(top10$Total)\ntop10$Business<-as.double(top10$Business)\ntop10$Pleasure<-as.double(top10$Pleasure)\ntop10$VisitRelatives<-as.double(top10$VisitRelatives)\ntop10$Conference<-as.double(top10$Conference)\ntop10$Study<-as.double(top10$Study)\ntop10$Exhibition<-as.double(top10$Exhibition)\ntop10$MedicalTreatment<-as.double(top10$MedicalTreatment)\ntop10$Others<-as.double(top10$Others)\n\ntop10$\"Percentage of Business\"<-top10$Business/top10$Total*100\ntop10$\"Percentage of Pleasure\"<-top10$Pleasure/top10$Total*100\ntop10$\"Percentage of VisitRelatives\"<-top10$VisitRelatives/top10$Total*100\ntop10$\"Percentage of Conference\"<-top10$Conference/top10$Total*100\ntop10$\"Percentage of Study\"<-top10$Study/top10$Total*100\ntop10$\"Percentage of Exhibition\"<-top10$Exhibition/top10$Total*100\ntop10$\"Percentage of MedicalTreatment\"<-top10$MedicalTreatment/top10$Total*100\ntop10$\"Percentage of Others\"<-top10$Others/top10$Total*100\ntop10$\"Country\"<-top10$'X1'\n\ntop10_purpose<-subset(top10,select = \n                        c(\"code\",\"Percentage of Business\",\"Percentage of Pleasure\",\"Percentage of VisitRelatives\",\"Percentage of Conference\",\"Percentage of Study\",\"Percentage of Exhibition\",\"Percentage of MedicalTreatment\",\"Percentage of Others\"))\n\nlibrary(knitr)\nknitr::kable(\n  top10_purpose[1:10,])\n\n\n\n\nlibrary(dplyr) \nlibrary(ggplot2)\nggplot()+geom_bar(data=top10_purpose,\n                  aes(x=code,y=\"Percentage of Business\"),\n                  stat = \"identity\")\nggplot()+geom_bar(data=top10_purpose,\n                  aes(x=code,y=\"Percentage of Pleasure\"),\n                  stat = \"identity\")\nggplot()+geom_bar(data=top10_purpose,\n                  aes(x=code,y=\"Percentage of VisitRelatives\"),\n                  stat = \"identity\")\nggplot()+geom_bar(data=top10_purpose,\n                  aes(x=code,y=\"Percentage of Conference\"),\n                  stat = \"identity\")\nggplot()+geom_bar(data=top10_purpose,\n                  aes(x=code,y=\"Percentage of Study\"),\n                  stat = \"identity\")\nggplot()+geom_bar(data=top10_purpose,\n                  aes(x=code,y=\"Percentage of Exhibition\"),\n                  stat = \"identity\")\nggplot()+geom_bar(data=top10_purpose,\n                  aes(x=code,y=\"Percentage of MedicalTreatment\"),\n                  stat = \"identity\")\nggplot()+geom_bar(data=top10_purpose,\n                  aes(x=code,y=\"Percentage of Others\"),\n                  stat = \"identity\")\n\n\n```\n\n## 探索式資料分析\n美國人來台灣商務比例最高，但觀光比例卻最低，探親比例也比日韓高出滿多，會議也是美國最高，展覽則是韓國最高，由此可以知道，美國和台灣主要是商業合作相較於旅遊非常熱絡，韓國來台展覽多因為台灣人很哈韓，韓國來台灣辦演唱會、展覽利潤很高\n\n\n```{r}\nhead(top10_purpose,9)\nlibrary(reshape2)\n\ntop10.m <- melt(top10_purpose,id.vars = \"code\") \nhead(top10.m,10)\nlibrary(ggplot2)\nggplot(top10.m, aes(variable, code)) + \n    geom_tile(aes(fill = value),\n              colour = \"#E0FFFF\")+ \n    scale_fill_gradient(\n        low = \"#E0FFFF\",high = \"steelblue\")\nlibrary(dplyr)\ntop10.s<-top10_purpose %>% \n    mutate_each(funs(scale), -code) \nhead(top10.s,2)\ntop10.s.m <- melt(top10.s)\nggplot(top10.s.m, aes(variable, code)) + \n    geom_tile(aes(fill = value),\n              colour = \"#E0FFFF\")+ \n    scale_fill_gradient(\n        low = \"#E0FFFF\",high = \"steelblue\")\n\n```\n\n```{r}\nlibrary(readr)\nsex_2016<- read_csv(\"C:/Users/X550LD/Desktop/visitor arrivals by sex(2016) .csv\")\nView(sex_2016)\nsex_2016$Residence<-\n  iconv(sex_2016$Residence,\n        from=\"big5\", to = \"UTF-8\")\ntop10_male_female<- \n  head(sex_2016[order(sex_2016$Total,decreasing = T),],10)\n\nlibrary(knitr)\nknitr::kable(\n  top10_male_female[1:10,])\n\nlibrary(ggplot2)\nqplot(x=Residence,                      \n      data=top10_male_female,              \n      geom=\"bar\",             \n      main = \"visitor arrivals by sex(male) \",  \n      xlab=\"Residence\",  \n      ylab = \"Male\",\n      fill= `M_Share(%)`)\n\nlibrary(ggplot2)\nqplot(x=Residence,                      \n      data=top10_male_female,              \n      geom=\"bar\",             \n      main = \"visitor arrivals by sex(female) \",  \n      xlab=\"Country\",\n      ylab = \"Female\",\n      fill=`F_Share(%)`)\n     \n\n\n```\n## 期末專題分析規劃\n期末專題時希望可以做出包含性別、年齡、以及對台灣觀光貢獻分析，外國人最愛旅遊地點分析等等。\n",
    "created" : 1497409146451.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "925384594",
    "id" : "C9928AB8",
    "lastKnownWriteTime" : 1497713952,
    "last_content_update" : 1497713952819,
    "path" : "~/GitHub/CGUIM_BigData_HW6-b034412926/README.Rmd",
    "project_path" : "README.Rmd",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}