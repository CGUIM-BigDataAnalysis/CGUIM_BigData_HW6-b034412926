{
    "collab_server" : "",
    "contents" : "---\ntitle: \"外國人來台灣數量及外配分析\"\nauthor: \"yahsuanyeh\"\ndate: \"2017年6月20日\"\noutput: html_document\n---\n## 分析議題背景\n組員姓名 B0344126鄭筠臻、B0344129葉亞萱 \n在地球村的時代，每年哪一國人最常來台灣呢，來台灣又有哪些目的呢?\n想知道台灣的新住民與外國人來台目的的關係!\n\n## 分析動機\n台灣是觀光勝地，想了解那些世界各國來台灣，找出前10名，找出與台灣密切往來的國家，並了解其目的，分析目的主要原因為何?例如：業務、觀光、探親、會議、求學、展覽、醫療……等等。想透過大數據R語言解釋出台灣在世界各國的重要性。\n\n## 使用資料\nhttp://admin.taiwan.net.tw/statistics/year.aspx?no=134\n\n載入使用資料們\n```{r}\nlibrary(readr)\ncountry<- read_csv(\"C:/Users/X550LD/Desktop/visitor arrivals (2003-2016).csv\")\nView(country)\ncountry$X1<-\n  iconv(country$X1,\n        from=\"big5\", to = \"UTF-8\")\n\nlibrary(readr)\npurpose_2016 <- read_csv(\"C:/Users/X550LD/Desktop/visitor arrivals by purpose(2016) .csv\")\nView(purpose_2016)\n\npurpose_2016$Residence<-\n  iconv(purpose_2016$Residence,\n        from=\"big5\", to = \"UTF-8\")\n\n```\n\n## 資料處理與清洗\n取出2016年，來台人數的資料，再把兩個表合起來，找出那些國家是前10名。\n\n```{r}\nlibrary(readr)\ncountrycode <- read_csv(\"C:/Users/X550LD/Desktop/Code.csv\")\nView(countrycode)\ncountrycode$Residence<-\n  iconv(countrycode$Residence,\n        from=\"big5\", to = \"UTF-8\")\n\nlibrary(dplyr)\npurpose_2016_code<-inner_join(purpose_2016,countrycode, by = \"Residence\")\n\nlibrary(treemap)\ndata(purpose_2016_code)\ntreemap(purpose_2016_code,\n       index=c(\"code\"), \n       vSize=\"Total\", \n       vColor=\"Total\", \n       type=\"value\")\n\nlibrary(knitr)\nknitr::kable(\n  purpose_2016_code[1:10,1:2])\n\n```\n## 資料處理與清洗\n把資料轉成數值，再算出各個比例，就可以知道前10名的國家來台灣大多是為了旅遊，洽公或是其他原因?\n處理資料\n```{r}\ncountry10<-head(country[order(country$X_2016,decreasing = T),],10)\ncountry10<-subset(country10,select = c(X1,X_2016))\nlibrary(dplyr)\ntop10<-inner_join(country10,purpose_2016_code,c(\"X1\"=\"Residence\"))\n\nlibrary(knitr)\nknitr::kable(\n  top10[1:10,])\n\ntop10$Total<-as.double(top10$Total)\ntop10$Business<-as.double(top10$Business)\ntop10$Pleasure<-as.double(top10$Pleasure)\ntop10$VisitRelatives<-as.double(top10$VisitRelatives)\ntop10$Conference<-as.double(top10$Conference)\ntop10$Study<-as.double(top10$Study)\ntop10$Exhibition<-as.double(top10$Exhibition)\ntop10$MedicalTreatment<-as.double(top10$MedicalTreatment)\ntop10$Others<-as.double(top10$Others)\n\ntop10$\"Percentage of Business\"<-top10$Business/top10$Total*100\ntop10$\"Percentage of Pleasure\"<-top10$Pleasure/top10$Total*100\ntop10$\"Percentage of VisitRelatives\"<-top10$VisitRelatives/top10$Total*100\ntop10$\"Percentage of Conference\"<-top10$Conference/top10$Total*100\ntop10$\"Percentage of Study\"<-top10$Study/top10$Total*100\ntop10$\"Percentage of Exhibition\"<-top10$Exhibition/top10$Total*100\ntop10$\"Percentage of MedicalTreatment\"<-top10$MedicalTreatment/top10$Total*100\ntop10$\"Percentage of Others\"<-top10$Others/top10$Total*100\ntop10$\"Country\"<-top10$'X1'\n\ntop10_purpose<-subset(top10,select = \n                        c(\"code\",\"Percentage of Business\",\"Percentage of Pleasure\",\"Percentage of VisitRelatives\",\"Percentage of Conference\",\"Percentage of Study\",\"Percentage of Exhibition\",\"Percentage of MedicalTreatment\",\"Percentage of Others\"))\nlibrary(knitr)\nknitr::kable(\n  top10_purpose[1:10,])\n\nlibrary(dplyr) \nlibrary(ggplot2)\nqplot(code, top10$\"Percentage of Business\", \n      data=top10_purpose,color=code,\n      main = \"Percentage of Business\",\n      geom = c(\"point\", \"smooth\"))\nqplot(code, top10$\"Percentage of Pleasure\", data=top10_purpose,color=code,\n      main = \"Percentage of Pleasure\",\n      geom = c(\"point\", \"smooth\"))\nqplot(code, top10$\"Percentage of VisitRelatives\", data=top10_purpose,color=code,\n      main = \"Percentage of VisitRelatives\",\n      geom = c(\"point\", \"smooth\"))\nqplot(code, top10$\"Percentage of Conference\", data=top10_purpose,color=code,\n      main = \"Percentage of Conference\",\n      geom = c(\"point\", \"smooth\"))\nqplot(code, top10$\"Percentage of Study\", data=top10_purpose,color=code,\n      main = \"Percentage of Study\",\n      geom = c(\"point\", \"smooth\"))\nqplot(code, top10$\"Percentage of Exhibition\", data=top10_purpose,color=code,\n      main = \"Percentage of Exhibition\",\n      geom = c(\"point\", \"smooth\"))\nqplot(code, top10$\"Percentage of MedicalTreatment\", data=top10_purpose,color=code,\n      main = \"Percentage of MedicalTreatment\",\n      geom = c(\"point\", \"smooth\"))\nqplot(code, top10$\"Percentage of Others\", data=top10_purpose,color=code,\n      main = \"Percentage of Others\",\n      geom = c(\"point\", \"smooth\"))\n\n```\n## 探索式資料分析\n美國人來台灣商務比例最高，但觀光比例卻最低，探親比例也比日韓高出滿多，會議也是美國最高，展覽則是韓國最高，由此可以知道，美國和台灣主要是商業合作相較於旅遊非常熱絡，韓國來台展覽多因為台灣人很哈韓，韓國來台灣辦演唱會、展覽利潤很高。\n\n\n```{r}\ntop10_purpose<-subset(top10,select = \n                        c(\"code\",\"Business\",\"Pleasure\",\"VisitRelatives\",\"Conference\",\"Study\",\"Exhibition\",\"MedicalTreatment\",\"Others\"))\nhead(top10_purpose,10)\nlibrary(reshape2)\n\ntop10.m <- melt(top10_purpose,id.vars = \"code\") \nhead(top10.m,10)\nlibrary(ggplot2)\n\nlibrary(dplyr)\ntop10.s<-top10_purpose %>% \n    mutate_each(funs(scale), -code) \nhead(top10.s,2)\ntop10.s.m <- melt(top10.s)\nggplot(top10.s.m, aes(variable, code)) + \n    geom_tile(aes(fill = value),\n              colour = \"#E6E6FA\")+ \n    scale_fill_gradient(\n        low = \"#FFB6C1\",high =\"#DC143C\")\n\n```\n\n```{r}\nlibrary(readr)\nsex_2016<- read_csv(\"C:/Users/X550LD/Desktop/visitor arrivals by sex(2016) .csv\")\nView(sex_2016)\nsex_2016$Residence<-\n  iconv(sex_2016$Residence,\n        from=\"big5\", to = \"UTF-8\")\ntop10_male_female<- \n  head(sex_2016[order(sex_2016$Total,decreasing = T),],10)\nlibrary(dplyr)\ntop10_male_female_code<-inner_join(countrycode,top10_male_female,by=\"Residence\")\nlibrary(knitr)\nknitr::kable(\n  top10_male_female_code[1:10,])\nlibrary(ggplot2)\nqplotmale<-\n  qplot(x=code,                      \n      data=top10_male_female_code,              \n      geom=\"bar\",             \n      main = \"visitor arrivals by sex(male) \",  \n      xlab=\"code\",  \n      ylab = \"Male\",\n      fill= `M_Share(%)`)\nqplotmale\nlibrary(ggplot2)\nqplotfemale<- \n  qplot(x=code,                      \n      data=top10_male_female_code,              \n      geom=\"bar\",             \n      main = \"visitor arrivals by sex(female) \",  \n      xlab=\"code\",\n      ylab = \"Female\",\n      fill=`F_Share(%)`)\nqplotfemale\n\n```\n```{r}\nlibrary(readr)\nreason <- read_csv(\"C:/Users/X550LD/Desktop/reason.csv\")\nView(reason)\nlibrary(data.table)\nreason<-data.table(reason)\nreason<-head(reason[order(reason$immigration_total,decreasing = T),],13)\nreason<-subset(reason,select = c(abc,immigration_total))\nlibrary(knitr)\nknitr::kable(\n  reason[1:13,])\nclassification<-reason[grepl('合計',abc)]\nlibrary(knitr)\nknitr::kable(\n  classification[1:3,])\nlibrary(readr)\nforeign_spouse <- read_csv(\"C:/Users/X550LD/Desktop/foreign_spouse.csv\")\nView(foreign_spouse)\nforeign_spouse$'total105'<-as.numeric(foreign_spouse$'total105')\nforeign_spouse<-head(foreign_spouse[order(foreign_spouse$'total105',decreasing = T),],5)\nforeign_spouse<-subset(foreign_spouse,select = c('X1','total105','boy105','girl105'))\nlibrary(knitr)\nknitr::kable(\n  foreign_spouse[1:5,])\n\nlibrary(ggplot2) \nqplot(boy105,girl105, \n      data = foreign_spouse)\n\nlibrary(ggplot2)\nggplot(data=reason) +   \n  geom_point(aes(x=abc, \n                 y=immigration_total,\n                 main=\"中國人來台原因\",\n                 color=abc,\n                 size=5)) + \n  labs(title=\"中國人來台原因\",\n       x=\"原因\",\n       y=\"人數\") + theme_bw()\nggplot(data=foreign_spouse) +   \n  geom_point(aes(x=X1, \n                 y=total105,\n                 main=\"105外籍配偶\",\n                 color=X1,\n                 size=5)) + \n  labs(title=\"105外籍配偶\",\n       x=\"國家\",\n       y=\"人數\") + theme_bw()\n```\n## 期末專題分析規劃\n期末專題時希望可以做出包含性別、年齡、以及對台灣外籍配偶分析，我國人吸引外籍來台分析等等。\n",
    "created" : 1498021392407.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4219352995",
    "id" : "A8DAC568",
    "lastKnownWriteTime" : 1498021499,
    "last_content_update" : 1498021499521,
    "path" : "~/GitHub/CGUIM_BigData_HW6-b034412926/written-report.Rmd",
    "project_path" : "written-report.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}